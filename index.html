<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#f2f4f7" />
  <meta name="description" content="SCORE Store | Tienda Oficial. Merch oficial de SCORE International. Pagos seguros con tarjeta o depósito OXXO." />
  <title>SCORE Store | Tienda Oficial</title>

  <!-- PWA (ya tienes site.webmanifest en root) -->
  <link rel="manifest" href="site.webmanifest" />

  <!-- Preload de lo más pesado -->
  <link rel="preload" as="image" href="assets/hero.png" fetchpriority="high">
  <link rel="preload" as="image" href="assets/logo-score.png" fetchpriority="high">

  <style>
    :root{
      --accent:#d10f10;
      --ink:#0f172a;
      --muted:rgba(15,23,42,.65);

      /* ✅ RUTAS REALES (según tu repo) */
      --pageTexture: url("assets/fondo-pagina-score.png");
      --heroBg: url("assets/hero.png");

      /* Ajuste recorte logo (para esconder texto inferior del PNG si lo trae) */
      --logoCropH: 44px;
      --logoShiftY: -28px;

      /* WhatsApp contacto (tomado del footer) */
      --waNumber: "526642368701";
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; overflow-x:hidden; }
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(209,15,16,.07), transparent 55%),
        linear-gradient(180deg, #f6f7f9 0%, #eef1f6 100%),
        var(--pageTexture);
      background-repeat:no-repeat,no-repeat,repeat;
      background-size:auto,auto,840px;
      background-position:center,center,center;
    }

    .topbar{
      position:sticky; top:0; z-index:50;
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      border-bottom:3px solid var(--accent);
      box-shadow: 0 8px 22px rgba(0,0,0,.08);
    }
    .topbarInner{
      max-width: 980px;
      margin: 0 auto;
      padding: 10px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    /* ✅ SOLO LOGO + recorte */
    .brand{
      height: var(--logoCropH);
      overflow:hidden;
      display:flex;
      align-items:flex-start;
      text-decoration:none;
    }
    .brand img{
      height: 92px;
      width:auto;
      display:block;
      transform: translateY(var(--logoShiftY));
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
      user-select:none;
      -webkit-user-drag:none;
    }

    .cartBtn{
      position:relative;
      border:0;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-radius:14px;
      font-weight:1000;
      letter-spacing:.02em;
      text-transform:uppercase;
      background: linear-gradient(180deg,#1b1f27,#10141b);
      color:#fff;
      box-shadow: 0 12px 18px rgba(0,0,0,.14);
      transition: transform .15s ease, box-shadow .15s ease;
      white-space:nowrap;
    }
    .cartBtn:active{ transform: scale(.98); }
    .cartBadge{
      position:absolute;
      top:-8px; right:-8px;
      min-width:22px; height:22px;
      border-radius:999px;
      background: var(--accent);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      font-weight:1000;
      border:2px solid rgba(255,255,255,.9);
      box-shadow: 0 10px 18px rgba(209,15,16,.25);
    }
    .cartIcon{
      width:20px; height:20px; flex:0 0 auto;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 14px 14px 56px;
    }

    /* HERO */
    .hero{
      border-radius:26px;
      overflow:hidden;
      min-height: 440px;
      position:relative;
      box-shadow: 0 18px 40px rgba(0,0,0,.14);
      background:
        var(--heroBg),
        radial-gradient(800px 420px at 25% 15%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(180deg, rgba(17,24,39,.92) 0%, rgba(3,7,18,.92) 100%);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      isolation:isolate;
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.10) 0%, rgba(0,0,0,.22) 70%, rgba(0,0,0,.32) 100%);
      pointer-events:none;
    }
    .heroContent{
      position:relative;
      z-index:2;
      padding: 18px 18px 22px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .tag{
      margin-top: 2px;
      align-self:flex-start;
      display:inline-flex;
      padding: 10px 16px;
      border-radius: 14px;
      background: linear-gradient(180deg, #ff2d2d, var(--accent));
      color:#fff;
      font-weight: 1000;
      letter-spacing:.06em;
      text-transform:uppercase;
      box-shadow: 0 18px 34px rgba(209,15,16,.20);
    }

    .heroTitle{
      margin:0;
      font-size: clamp(34px, 10.2vw, 84px);
      line-height: .92;
      font-weight: 1000;
      letter-spacing: .02em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 0 5px 18px rgba(0,0,0,0.55);
      white-space: nowrap;
      overflow:hidden;
      max-width:100%;
    }

    .heroSub{
      margin: 2px 0 0;
      display:flex;
      gap: 12px;
      align-items:flex-start;
      color: rgba(255,255,255,.92);
      font-weight: 800;
      font-size: 15px;
      line-height: 1.35;
      max-width: 560px;
    }
    .heroSub .bar{
      width:4px;
      min-height: 42px;
      border-radius: 999px;
      background: var(--accent);
      flex:0 0 auto;
      box-shadow: 0 10px 18px rgba(209,15,16,.20);
    }

    /* Banda clara EDICIONES */
    .band{
      margin-top: 16px;
      border-radius: 22px;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(255,255,255,.65);
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
      padding: 14px 14px;
      content-visibility:auto;
      contain-intrinsic-size: 1px 1200px;
    }
    .secHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .secHead h2{
      margin:0;
      font-size: 34px;
      letter-spacing: .02em;
      text-transform: uppercase;
      font-weight: 1000;
      color: #0b0f14;
    }
    .secHead .secNote{
      margin:0;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing:.05em;
      font-size: 12px;
      color: rgba(15,23,42,.60);
    }

    .grid{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    /* ✅ Ediciones SIN overlay oscuro */
    .edition{
      position:relative;
      border-radius: 24px;
      overflow:hidden;
      min-height: 220px;
      box-shadow: 0 14px 28px rgba(0,0,0,.10);
      background:
        var(--cardBg, none) center/cover no-repeat,
        radial-gradient(900px 320px at 10% 0%, rgba(255,255,255,.10), transparent 55%),
        linear-gradient(180deg, rgba(15,23,42,.92) 0%, rgba(2,6,23,.92) 100%);
    }

    .badge{
      position:absolute;
      top:14px; left:14px;
      z-index:2;
      padding: 7px 12px;
      border-radius: 999px;
      font-weight: 1000;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size: 12px;
      color:#fff;
      border: 1px solid rgba(255,255,255,.22);
      backdrop-filter: blur(8px);
    }
    .badge.active{ background: rgba(209,15,16,.92); }
    .badge.soon{ background: rgba(17,24,39,.60); }

    .editionInner{
      position:relative;
      z-index:2;
      min-height: 220px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 12px;
      padding: 18px 14px;
      text-align:center;
    }

    .editionLogo{
      width: min(380px, 82%);
      height:auto;
      display:block;
      filter:
        drop-shadow(0 0 0 #ffffff)
        drop-shadow(1px 0 0 #ffffff)
        drop-shadow(-1px 0 0 #ffffff)
        drop-shadow(0 1px 0 #ffffff)
        drop-shadow(0 -1px 0 #ffffff)
        drop-shadow(0 12px 30px rgba(0,0,0,.38));
      user-select:none;
      -webkit-user-drag:none;
    }
    .editionLogo.hide{ display:none; }

    .editionCta{
      border:0;
      cursor:pointer;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 1000;
      letter-spacing:.04em;
      text-transform:uppercase;
      background: rgba(255,255,255,.92);
      color: #0b0f14;
      box-shadow: 0 12px 22px rgba(0,0,0,.18);
      transition: transform .14s ease, background .14s ease;
    }
    .editionCta:active{ transform: scale(.98); }
    .editionCta:hover{ background:#fff; }

    /* Tarjetas verdes */
    .infoRow{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .infoCard{
      border-radius: 22px;
      padding: 16px 16px;
      background: linear-gradient(180deg, rgba(22,101,52,.16), rgba(22,101,52,.10));
      border: 1px solid rgba(34,197,94,.22);
      box-shadow: 0 12px 24px rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
    }
    .infoTitle{
      margin:0;
      font-size: 18px;
      font-weight: 1000;
      letter-spacing:.02em;
      text-transform: uppercase;
      color:#0b0f14;
    }
    .infoSub{
      margin: 6px 0 0;
      font-weight: 950;
      color: rgba(15,23,42,.72);
      text-transform: uppercase;
      letter-spacing:.05em;
      font-size: 12px;
    }

    /* Partners */
    .partners{
      margin-top: 16px;
      border-radius: 22px;
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(255,255,255,.65);
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
      overflow:hidden;
    }
    .partnersHead{
      padding: 14px 14px 10px;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing:.06em;
      color: rgba(15,23,42,.60);
      text-align:center;
    }
    .partnersGrid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      padding: 14px 14px 18px;
      align-items:center;
      justify-items:center;
    }
    .partnersGrid img{
      width: min(180px, 70%);
      height:auto;
      opacity: .94;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.10));
    }

    /* PRODUCTOS */
    .products{
      margin-top: 16px;
      border-radius: 22px;
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(255,255,255,.65);
      box-shadow: 0 12px 26px rgba(0,0,0,.08);
      overflow:hidden;
    }
    .productsHead{
      padding: 14px 14px 8px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .productsHead h3{
      margin:0;
      font-size: 22px;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing:.03em;
      color:#0b0f14;
    }
    .pillRow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .pill{
      border:1px solid rgba(15,23,42,.14);
      background: rgba(15,23,42,.04);
      padding: 10px 12px;
      border-radius: 999px;
      font-weight: 950;
      letter-spacing:.03em;
      text-transform: uppercase;
      font-size: 12px;
      cursor:pointer;
      user-select:none;
    }
    .pill.active{
      border-color: rgba(209,15,16,.35);
      background: rgba(209,15,16,.10);
      color: #0b0f14;
    }
    .productsGrid{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .pCard{
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(15,23,42,.10);
      overflow:hidden;
      box-shadow: 0 10px 22px rgba(0,0,0,.06);
      display:grid;
      grid-template-columns: 120px 1fr;
      min-height: 120px;
    }
    .pImg{
      width:120px; height:120px;
      object-fit:cover;
      display:block;
      background: rgba(15,23,42,.06);
    }
    .pBody{
      padding: 12px 12px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .pName{
      margin:0;
      font-weight: 1000;
      letter-spacing:.01em;
      text-transform: uppercase;
      font-size: 14px;
      color:#0b0f14;
    }
    .pMeta{
      margin:0;
      color: rgba(15,23,42,.65);
      font-weight: 850;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing:.05em;
    }
    .pRow{
      margin-top:auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .pPrice{
      font-weight:1000;
      color:#0b0f14;
      letter-spacing:.02em;
    }
    .addBtn{
      border:0;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight:1000;
      text-transform: uppercase;
      letter-spacing:.05em;
      background: linear-gradient(180deg,#1b1f27,#10141b);
      color:#fff;
      box-shadow: 0 12px 18px rgba(0,0,0,.12);
    }

    /* Footer */
    footer{ margin-top: 18px; padding: 8px 2px 0; }
    .footerCard{
      background: rgba(0,0,0,.64);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 22px;
      padding: 16px 16px;
      backdrop-filter: blur(12px);
      box-shadow: 0 20px 50px rgba(0,0,0,.16);
      color: rgba(255,255,255,.88);
    }
    .footerTitle{
      margin:0;
      font-size: 24px;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing:.03em;
    }
    .footerText{
      margin: 10px 0 0;
      color: rgba(255,255,255,.78);
      line-height: 1.45;
      font-weight: 650;
    }
    .legal{
      margin-top: 14px;
      display:grid;
      gap: 10px;
    }
    .legal a{
      color: rgba(255,255,255,.90);
      text-decoration:none;
      font-weight: 950;
      border-bottom: 1px solid rgba(255,255,255,.25);
      width: fit-content;
    }

    /* Modal carrito */
    .modal{
      position: fixed;
      inset: 0;
      z-index: 80;
      display:none;
      align-items:flex-start;
      justify-content:center;
      padding: 18px 12px;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
    }
    .modal.open{ display:flex; }
    .panel{
      width: min(720px, 100%);
      border-radius: 22px;
      background: rgba(255,255,255,.96);
      box-shadow: 0 34px 90px rgba(0,0,0,.28);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.65);
      animation: pop .16s ease-out;
    }
    @keyframes pop{ from{ transform: translateY(6px); opacity: 0; } to{ transform: translateY(0); opacity: 1; } }
    .panelHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 16px 16px;
      border-bottom: 1px solid rgba(15,23,42,.08);
    }
    .panelHead h3{
      margin:0;
      font-size: 34px;
      font-weight: 1000;
      letter-spacing:.02em;
      text-transform: uppercase;
    }
    .closeBtn{
      border:0;
      background: rgba(15,23,42,.08);
      color:#0b0f14;
      width:44px;height:44px;
      border-radius: 14px;
      cursor:pointer;
      font-size: 22px;
      font-weight: 1000;
    }
    .panelBody{ padding: 14px 16px 18px; }

    .toast{
      position: fixed;
      left: 12px; right: 12px; bottom: 14px;
      max-width: 980px;
      margin: 0 auto;
      z-index: 120;
      display:none;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(15,23,42,.92);
      color: rgba(255,255,255,.92);
      font-weight: 900;
      letter-spacing:.02em;
      box-shadow: 0 18px 40px rgba(0,0,0,.22);
    }
    .toast.show{ display:block; }

    .cartItems{
      display:grid;
      gap:10px;
      margin-bottom: 12px;
    }
    .cItem{
      display:grid;
      grid-template-columns: 64px 1fr;
      gap:10px;
      padding: 10px;
      border-radius: 16px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
      align-items:center;
    }
    .cItem img{
      width:64px; height:64px; object-fit:cover; border-radius: 12px;
      background: rgba(15,23,42,.06);
    }
    .cName{
      margin:0;
      font-weight: 1000;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing:.03em;
      color:#0b0f14;
    }
    .cSub{
      margin:4px 0 0;
      color: rgba(15,23,42,.65);
      font-weight: 850;
      font-size: 12px;
    }
    .cRow{
      margin-top: 8px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .qty{
      display:flex;
      align-items:center;
      gap:8px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(15,23,42,.10);
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 1000;
    }
    .qty button{
      width:28px;height:28px;
      border:0;
      border-radius: 999px;
      background: rgba(15,23,42,.10);
      cursor:pointer;
      font-weight: 1000;
    }
    .rm{
      border:0;
      cursor:pointer;
      background: rgba(209,15,16,.10);
      color: #7a0b0b;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 1000;
      text-transform: uppercase;
      letter-spacing:.05em;
    }

    .empty{
      text-align:center;
      padding: 10px 12px 6px;
      font-weight: 1000;
      letter-spacing:.06em;
      text-transform: uppercase;
      color: rgba(15,23,42,.40);
    }

    .totals{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
      margin-bottom: 12px;
    }
    .totals .left{ color: rgba(15,23,42,.70); font-weight: 900; line-height: 1.5; }
    .totals .right{ text-align:right; font-weight: 1000; }

    .shipBlock{
      margin-top: 10px;
      padding: 14px 12px;
      border-radius: 18px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
    }
    .shipTitle{
      margin:0 0 10px;
      font-weight: 1000;
      letter-spacing:.05em;
      text-transform: uppercase;
    }
    .shipHint{
      margin:0 0 12px;
      color: rgba(15,23,42,.65);
      font-weight: 750;
    }
    .shipOpt{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(15,23,42,.08);
      margin-bottom: 10px;
    }
    .shipOpt:last-child{ margin-bottom:0; }
    .shipOpt input{ margin-top: 3px; transform: scale(1.15); }
    .shipOpt b{
      display:block;
      font-size: 18px;
      font-weight: 1000;
      letter-spacing:.01em;
    }
    .shipOpt span{
      display:block;
      margin-top: 4px;
      color: rgba(15,23,42,.70);
      font-weight: 750;
    }

    .promoRow{
      margin-top: 12px;
      display:flex;
      gap: 10px;
      align-items:center;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
    }
    .promoRow input{
      flex:1;
      border: 1px solid rgba(15,23,42,.14);
      background: rgba(15,23,42,.04);
      padding: 13px 14px;
      border-radius: 14px;
      font-weight: 900;
      outline:none;
      text-transform: uppercase;
    }
    .promoRow button{
      border:0;
      cursor:pointer;
      padding: 13px 16px;
      border-radius: 14px;
      font-weight: 1000;
      letter-spacing:.05em;
      text-transform: uppercase;
      background: linear-gradient(180deg,#1b1f27,#10141b);
      color:#fff;
      box-shadow: 0 12px 18px rgba(0,0,0,.14);
    }

    .checkout{
      margin-top: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .payBtn{
      border:0;
      padding: 16px 14px;
      border-radius: 16px;
      font-weight: 1000;
      letter-spacing:.06em;
      text-transform: uppercase;
      background: rgba(15,23,42,.20);
      color: rgba(255,255,255,.92);
      cursor:not-allowed;
    }
    .payBtn.enabled{
      cursor:pointer;
      background: linear-gradient(180deg,#1b1f27,#10141b);
      box-shadow: 0 18px 28px rgba(0,0,0,.18);
    }
    .mpBtn{
      border:0;
      padding: 16px 14px;
      border-radius: 16px;
      font-weight: 1000;
      letter-spacing:.06em;
      text-transform: uppercase;
      background: rgba(209,15,16,.14);
      color: #7a0b0b;
      cursor:pointer;
    }
    .mpBtn.disabled{
      cursor:not-allowed;
      opacity:.55;
    }
    .dangerLink{
      text-align:center;
      font-weight: 1000;
      color: rgba(15,23,42,.62);
      text-decoration:none;
    }

    /* Animaciones suaves */
    .hero, .band, .edition, .infoCard, .partners, .products, .footerCard{
      animation: fadeUp .35s ease both;
    }
    .edition:nth-child(2){ animation-delay:.05s; }
    .edition:nth-child(3){ animation-delay:.09s; }
    .edition:nth-child(4){ animation-delay:.12s; }
    @keyframes fadeUp{
      from{ transform: translateY(10px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }
    .badge.active{ animation: pulse 1.8s ease-in-out infinite; }
    @keyframes pulse{ 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-1px);} }

    @media (min-width: 720px){
      .grid{ grid-template-columns: 1fr 1fr; }
      .infoRow{ grid-template-columns: 1fr 1fr; }
      .partnersGrid{ grid-template-columns: repeat(4, 1fr); }
      .productsGrid{ grid-template-columns: 1fr 1fr; }
      .hero{ min-height: 500px; }
      .heroContent{ padding: 22px 22px 26px; }
    }
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="topbarInner">
      <a class="brand" href="#top" aria-label="SCORE Store">
        <img id="logoImg" src="assets/logo-score.png" alt="SCORE" width="420" height="92"
             onerror="this.style.display='none';" />
      </a>

      <button class="cartBtn" id="openCart" type="button" aria-label="Abrir carrito">
        <img class="cartIcon" src="assets/Icono-carrito-compra.png" alt="" aria-hidden="true"
             loading="eager" decoding="async"
             onerror="this.remove();">
        CARRITO
        <span class="cartBadge" id="cartCount">0</span>
      </button>
    </div>
  </header>

  <main class="wrap" id="top">
    <!-- HERO -->
    <section class="hero" aria-label="Merch oficial">
      <div class="heroContent">
        <div class="tag">MERCH OFICIAL</div>
        <h1 class="heroTitle">SCORE INTERNATIONAL</h1>

        <div class="heroSub">
          <div class="bar" aria-hidden="true"></div>
          <p style="margin:0;">Pagos seguros con tarjeta o depósito OXXO a todo México.</p>
        </div>
      </div>
    </section>

    <!-- EDICIONES -->
    <section class="band" aria-label="Ediciones">
      <div class="secHead">
        <h2>EDICIONES</h2>
        <p class="secNote">MERCH OFICIAL DE SCORE INTERNATIONAL</p>
      </div>

      <div class="grid" aria-label="Ediciones oficiales">
        <!-- BAJA 1000 (✅ textura real existente) -->
        <article class="edition" id="ed-baja1000" style="--cardBg:url('assets/baja1000-texture.png')" aria-label="Baja 1000">
          <div class="badge active">ACTIVO</div>
          <div class="editionInner">
            <img class="editionLogo" id="logo-baja1000" src="assets/logo-baja1000.png" alt="Baja 1000"
                 loading="eager" decoding="async"
                 onerror="this.classList.add('hide');" />
            <button class="editionCta" type="button" data-scroll="#productos" data-filter="baja1000">VER PRODUCTOS</button>
          </div>
        </article>

        <!-- SAN FELIPE 250 -->
        <article class="edition" id="ed-sanfelipe250" style="--cardBg:url('assets/fondo-pagina-score.png')" aria-label="San Felipe 250">
          <div class="badge soon">PRÓXIMO</div>
          <div class="editionInner">
            <img class="editionLogo" id="logo-sanfelipe250" src="assets/logo-sf250.png" alt="San Felipe 250"
                 loading="lazy" decoding="async"
                 onerror="this.classList.add('hide');" />
            <button class="editionCta" type="button" data-wa="San Felipe 250">AVÍSAME</button>
          </div>
        </article>

        <!-- BAJA 500 -->
        <article class="edition" id="ed-baja500" style="--cardBg:url('assets/fondo-pagina-score.png')" aria-label="Baja 500">
          <div class="badge soon">PRÓXIMO</div>
          <div class="editionInner">
            <img class="editionLogo" id="logo-baja500" src="assets/logo-baja500.png" alt="Baja 500"
                 loading="lazy" decoding="async"
                 onerror="this.classList.add('hide');" />
            <button class="editionCta" type="button" data-wa="Baja 500">AVÍSAME</button>
          </div>
        </article>

        <!-- BAJA 400 -->
        <article class="edition" id="ed-baja400" style="--cardBg:url('assets/fondo-pagina-score.png')" aria-label="Baja 400">
          <div class="badge soon">PRÓXIMO</div>
          <div class="editionInner">
            <img class="editionLogo" id="logo-baja400" src="assets/logo-baja400.png" alt="Baja 400"
                 loading="lazy" decoding="async"
                 onerror="this.classList.add('hide');" />
            <button class="editionCta" type="button" data-wa="Baja 400">AVÍSAME</button>
          </div>
        </article>
      </div>

      <!-- Tarjetas verdes (lo mínimo que pediste) -->
      <section class="infoRow" aria-label="Información rápida">
        <div class="infoCard" role="note">
          <p class="infoTitle">COMPRA SEGURA</p>
          <p class="infoSub">PAGOS CON TARJETA O DEPÓSITOS OXXO</p>
        </div>
        <div class="infoCard" role="note">
          <p class="infoTitle">EDICIÓN LIMITADA</p>
        </div>
      </section>

      <!-- PARTNERS (✅ rutas reales) -->
      <section class="partners" aria-label="Socios oficiales">
        <div class="partnersHead">SOCIOS OFICIALES</div>
        <div class="partnersGrid">
          <img id="p-ford" src="assets/logo-ford.png" alt="Ford" loading="lazy" decoding="async" onerror="this.style.display='none';" />
          <img id="p-rzr"  src="assets/logo-rzr.png" alt="RZR" loading="lazy" decoding="async" onerror="this.style.display='none';" />
          <img id="p-bfg"  src="assets/logo-bfgoodrich.png" alt="BFGoodrich" loading="lazy" decoding="async" onerror="this.style.display='none';" />
          <img id="p-unico"src="assets/logo-unico.png" alt="Único Uniformes" loading="lazy" decoding="async" onerror="this.style.display='none';" />
        </div>
      </section>

      <!-- PRODUCTOS -->
      <section class="products" id="productos" aria-label="Productos">
        <div class="productsHead">
          <h3>PRODUCTOS</h3>
          <div class="pillRow" role="tablist" aria-label="Filtros">
            <div class="pill active" role="tab" tabindex="0" data-filter="baja1000">BAJA 1000</div>
            <div class="pill" role="tab" tabindex="0" data-filter="all">VER TODO</div>
          </div>
        </div>

        <div class="productsGrid" id="productsGrid"></div>
        <div class="empty" id="productsEmpty" style="display:none;">SIN PRODUCTOS DISPONIBLES</div>
      </section>
    </section>

    <!-- FOOTER -->
    <footer>
      <div class="footerCard">
        <p class="footerTitle">ÚNICO UNIFORMES</p>
        <p class="footerText">
          Fabricante y Patrocinador oficial.<br>
          Palermo 6106 Interior JK, Anexa Roma, 22614 Tijuana, B.C.<br><br>
          unicouniformes.com<br><br>
          ventas.unicotextil@gmail.com<br>
          WhatsApp: 664 236 8701
        </p>

        <div class="legal">
          <a href="terminos.html">Términos y condiciones</a>
          <a href="privacidad.html">Aviso de privacidad</a>
          <a href="envios.html">Envíos y entregas</a>
          <a href="devoluciones.html">Cambios y devoluciones</a>
        </div>
      </div>
    </footer>
  </main>

  <!-- CARRITO -->
  <div class="modal" id="cartModal" role="dialog" aria-modal="true" aria-label="Carrito">
    <div class="panel">
      <div class="panelHead">
        <h3>TU EQUIPO</h3>
        <button class="closeBtn" id="closeCart" type="button" aria-label="Cerrar">×</button>
      </div>

      <div class="panelBody">
        <div class="cartItems" id="cartItems"></div>
        <div class="empty" id="emptyState">CARRITO VACÍO</div>

        <div class="totals" aria-label="Totales">
          <div class="left">Subtotal:<br>Total:</div>
          <div class="right">
            <div id="subtotal">$0.00</div>
            <div id="total">$0.00</div>
          </div>
        </div>

        <div class="shipBlock" aria-label="Entrega y envío">
          <p class="shipTitle">ENTREGA / ENVÍO</p>
          <p class="shipHint">Te contactamos para coordinar.</p>

          <label class="shipOpt">
            <input type="radio" name="ship" value="pickup" checked />
            <div>
              <b>Recolección en fábrica (Tijuana)</b>
              <span>Pasa por tu pedido (te contactamos para coordinar).</span>
            </div>
          </label>

          <label class="shipOpt">
            <input type="radio" name="ship" value="local" />
            <div>
              <b>Envío local (Tijuana)</b>
              <span>Entregas dentro de Tijuana.</span>
            </div>
          </label>

          <label class="shipOpt">
            <input type="radio" name="ship" value="mx" />
            <div>
              <b>Envío nacional (MX)</b>
              <span>Se confirma al finalizar la compra.</span>
            </div>
          </label>
        </div>

        <!-- Campo promos sin decir “cupón” -->
        <div class="promoRow" aria-label="Código">
          <input id="promoInput" type="text" autocomplete="off" placeholder="CÓDIGO (OPCIONAL)" />
          <button id="promoApply" type="button">APLICAR</button>
        </div>

        <div class="checkout">
          <button class="payBtn" id="payBtn" type="button" disabled>PAGAR (STRIPE)</button>

          <!-- ✅ Link Mercado Pago: se activa si existe en data/promos.json o lo pones en JS -->
          <button class="mpBtn disabled" id="mpBtn" type="button" disabled>PAGAR (MERCADO PAGO)</button>

          <a class="dangerLink" href="#" id="clearCart" onclick="return false;">Vaciar carrito</a>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    /***********************
     * FIX REAL (con tu estructura):
     * - assets/* directo (NO assets/ediciones ni assets/partners)
     * - carga data/catalog.json si existe
     * - fallback con tus fotos reales de assets/EDICION_2025/
     ***********************/

    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));

    const API = {
      createCheckout: "/.netlify/functions/create_checkout",
    };

    const DATA = {
      catalog: "data/catalog.json",
      promos: "data/promos.json",
    };

    const FALLBACK_PRODUCTS = [
      { id:"camisa-pits-baja1000", name:"Camisa Pits Baja 1000", edition:"baja1000", img:"assets/EDICION_2025/camisa-pits-baja1000.jpg" },
      { id:"camiseta-baja1000-azul", name:"Camiseta Baja 1000 Azul", edition:"baja1000", img:"assets/EDICION_2025/camiseta-baja1000-azul.jpg" },
      { id:"camiseta-baja1000-cafe", name:"Camiseta Baja 1000 Café", edition:"baja1000", img:"assets/EDICION_2025/camiseta-baja1000-cafe.jpg" },
      { id:"camiseta-baja1000-negra", name:"Camiseta Baja 1000 Negra", edition:"baja1000", img:"assets/EDICION_2025/camiseta-baja1000-negra.jpg" },
      { id:"chamarra-baja1000", name:"Chamarra Baja 1000", edition:"baja1000", img:"assets/EDICION_2025/chamarra-baja1000.jpg" },
      { id:"sudadera-world-desert-cafe", name:"Sudadera World Desert Café", edition:"baja1000", img:"assets/EDICION_2025/sudadera-world-desert-cafe.jpg" },
      { id:"sudadera-world-desert-negra", name:"Sudadera World Desert Negra", edition:"baja1000", img:"assets/EDICION_2025/sudadera-world-desert-negra.jpg" },
    ];

    const toast = $("#toast");
    let toastT = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(toastT);
      toastT = setTimeout(()=>toast.classList.remove("show"), 2600);
    }

    // WhatsApp "AVÍSAME"
    function waLink(edition){
      const num = getComputedStyle(document.documentElement).getPropertyValue("--waNumber").replace(/["\s]/g,"");
      const text = encodeURIComponent(`Hola, quiero que me avises cuando salga la edición ${edition} en SCORE Store.`);
      return `https://wa.me/${num}?text=${text}`;
    }

    // Scroll & filter
    $$(".editionCta").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const scrollTo = btn.getAttribute("data-scroll");
        const filter = btn.getAttribute("data-filter");
        const wa = btn.getAttribute("data-wa");

        if(wa){
          window.open(waLink(wa), "_blank");
          return;
        }
        if(filter) setActiveFilter(filter);
        if(scrollTo){
          const el = document.querySelector(scrollTo);
          if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
        }
      });
    });

    // Products
    const productsGrid = $("#productsGrid");
    const productsEmpty = $("#productsEmpty");
    let ALL_PRODUCTS = [];
    let ACTIVE_FILTER = "baja1000";

    function normalizeCatalog(raw){
      // Acepta: array, {products:[]}, {items:[]}
      const list = Array.isArray(raw) ? raw : (raw?.products || raw?.items || []);
      const norm = [];
      for(const p of list){
        const id = p.id || p.sku || p.slug || p.code || cryptoRandomId();
        const name = p.name || p.title || p.product || "Producto";
        const edition = (p.edition || p.collection || p.category || "").toString().toLowerCase();
        const price = (p.price_mxn ?? p.priceMXN ?? p.price ?? p.mxn ?? null);
        let img = p.image || p.img || p.photo || p.thumbnail || "";
        img = (img || "").toString();

        // Si viene solo nombre de archivo, intenta en EDICION_2025
        if(img && !img.includes("/")) img = "assets/EDICION_2025/" + img;

        norm.push({ id, name, edition, price, img });
      }
      return norm;
    }

    function cryptoRandomId(){
      return "p_" + Math.random().toString(16).slice(2) + Date.now().toString(16);
    }

    function renderProducts(){
      const list = ACTIVE_FILTER === "all"
        ? ALL_PRODUCTS
        : ALL_PRODUCTS.filter(p => (p.edition || "").includes(ACTIVE_FILTER));

      productsGrid.innerHTML = "";
      productsEmpty.style.display = list.length ? "none" : "block";

      for(const p of list){
        const card = document.createElement("div");
        card.className = "pCard";

        const img = document.createElement("img");
        img.className = "pImg";
        img.loading = "lazy";
        img.decoding = "async";
        img.alt = p.name;
        img.src = p.img || "";
        img.onerror = () => { img.src = ""; img.style.background = "rgba(15,23,42,.06)"; };

        const body = document.createElement("div");
        body.className = "pBody";

        const name = document.createElement("p");
        name.className = "pName";
        name.textContent = p.name;

        const meta = document.createElement("p");
        meta.className = "pMeta";
        meta.textContent = (p.edition ? p.edition.toUpperCase() : "EDICIÓN");

        const row = document.createElement("div");
        row.className = "pRow";

        const price = document.createElement("div");
        price.className = "pPrice";
        price.textContent = (p.price != null && p.price !== "")
          ? `$${Number(p.price).toFixed(2)} MXN`
          : "PRECIO A CONFIRMAR";

        const add = document.createElement("button");
        add.className = "addBtn";
        add.type = "button";
        add.textContent = "AGREGAR";
        add.addEventListener("click", ()=> addToCart(p));

        row.append(price, add);
        body.append(name, meta, row);

        card.append(img, body);
        productsGrid.append(card);
      }
    }

    function setActiveFilter(filter){
      ACTIVE_FILTER = filter;
      $$(".pill").forEach(p=>p.classList.toggle("active", p.dataset.filter === filter));
      renderProducts();
    }

    $$(".pill").forEach(p=>{
      p.addEventListener("click", ()=> setActiveFilter(p.dataset.filter));
      p.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" "){ e.preventDefault(); setActiveFilter(p.dataset.filter); }});
    });

    async function loadCatalog(){
      // 1) intenta catalog real
      try{
        const r = await fetch(DATA.catalog, {cache:"no-store"});
        if(r.ok){
          const raw = await r.json();
          const norm = normalizeCatalog(raw);
          if(norm.length){
            ALL_PRODUCTS = norm;
            return;
          }
        }
      }catch(e){}

      // 2) fallback con tus fotos reales
      ALL_PRODUCTS = FALLBACK_PRODUCTS.map(p => ({...p, price:null}));
    }

    // Promos / Mercado Pago URL (si existe en data/promos.json)
    let MERCADO_PAGO_URL = "";
    async function loadPromosConfig(){
      try{
        const r = await fetch(DATA.promos, {cache:"no-store"});
        if(!r.ok) return;
        const raw = await r.json();
        // intenta llaves típicas
        MERCADO_PAGO_URL = raw.mercadoPagoUrl || raw.mercado_pago_url || raw.mp_url || "";
      }catch(e){}
    }

    // CART
    const cart = { items: [], promo: null };

    const cartCount = $("#cartCount");
    const cartModal = $("#cartModal");
    const openCart = $("#openCart");
    const closeCart = $("#closeCart");
    const payBtn = $("#payBtn");
    const mpBtn = $("#mpBtn");
    const clearCart = $("#clearCart");
    const emptyState = $("#emptyState");
    const subtotalEl = $("#subtotal");
    const totalEl = $("#total");
    const cartItemsEl = $("#cartItems");

    function money(n){ return "$" + (Number(n||0)).toFixed(2); }

    function saveCart(){
      localStorage.setItem("score_cart_v1", JSON.stringify(cart));
    }
    function loadSavedCart(){
      try{
        const s = localStorage.getItem("score_cart_v1");
        if(!s) return;
        const obj = JSON.parse(s);
        if(obj && Array.isArray(obj.items)) cart.items = obj.items;
        if(obj && obj.promo) cart.promo = obj.promo;
      }catch(e){}
    }

    function addToCart(p){
      const found = cart.items.find(i => i.id === p.id);
      if(found) found.qty += 1;
      else cart.items.push({ id:p.id, name:p.name, img:p.img || "", price:p.price ?? null, qty:1 });
      updateCartUI();
      saveCart();
      showToast("Agregado al carrito.");
    }

    function updateCartUI(){
      const count = cart.items.reduce((a,i)=>a + (i.qty||1), 0);
      cartCount.textContent = String(count);

      cartItemsEl.innerHTML = "";
      if(count === 0){
        emptyState.style.display = "block";
        payBtn.classList.remove("enabled");
        payBtn.disabled = true;
      }else{
        emptyState.style.display = "none";
      }

      // Render items
      for(const it of cart.items){
        const row = document.createElement("div");
        row.className = "cItem";

        const img = document.createElement("img");
        img.src = it.img || "";
        img.alt = it.name || "Producto";
        img.loading = "lazy";
        img.decoding = "async";
        img.onerror = ()=>{ img.src = ""; };

        const box = document.createElement("div");

        const name = document.createElement("p");
        name.className = "cName";
        name.textContent = it.name || "Producto";

        const sub = document.createElement("p");
        sub.className = "cSub";
        sub.textContent = (it.price != null && it.price !== "")
          ? `${money(it.price)} MXN`
          : "Precio a confirmar";

        const controls = document.createElement("div");
        controls.className = "cRow";

        const qty = document.createElement("div");
        qty.className = "qty";

        const minus = document.createElement("button");
        minus.type = "button";
        minus.textContent = "−";
        minus.addEventListener("click", ()=>{
          it.qty = Math.max(1, (it.qty||1) - 1);
          updateCartUI(); saveCart();
        });

        const qv = document.createElement("div");
        qv.textContent = String(it.qty||1);

        const plus = document.createElement("button");
        plus.type = "button";
        plus.textContent = "+";
        plus.addEventListener("click", ()=>{
          it.qty = (it.qty||1) + 1;
          updateCartUI(); saveCart();
        });

        qty.append(minus, qv, plus);

        const rm = document.createElement("button");
        rm.className = "rm";
        rm.type = "button";
        rm.textContent = "QUITAR";
        rm.addEventListener("click", ()=>{
          cart.items = cart.items.filter(x => x !== it);
          updateCartUI(); saveCart();
        });

        controls.append(qty, rm);
        box.append(name, sub, controls);

        row.append(img, box);
        cartItemsEl.append(row);
      }

      // Totals (solo suma si hay precio)
      const subtotal = cart.items.reduce((a,i)=> a + (Number(i.price||0) * (i.qty||1)), 0);
      subtotalEl.textContent = money(subtotal);
      totalEl.textContent = money(subtotal);

      // Enable pay solo si hay items Y todos tienen precio
      const allPriced = cart.items.length && cart.items.every(i => i.price != null && i.price !== "");
      payBtn.disabled = !allPriced;
      payBtn.classList.toggle("enabled", allPriced);

      if(!allPriced && cart.items.length){
        showToast("Hay productos sin precio en catálogo. Revisa data/catalog.json.");
      }
    }

    function openModal(){ cartModal.classList.add("open"); document.body.style.overflow="hidden"; }
    function closeModal(){ cartModal.classList.remove("open"); document.body.style.overflow=""; }

    openCart.addEventListener("click", openModal);
    closeCart.addEventListener("click", closeModal);
    cartModal.addEventListener("click", (e)=>{ if(e.target === cartModal) closeModal(); });

    clearCart.addEventListener("click", ()=>{
      cart.items = [];
      cart.promo = null;
      updateCartUI();
      saveCart();
      closeModal();
    });

    $("#promoApply").addEventListener("click", ()=>{
      const code = ($("#promoInput").value || "").trim();
      if(!code) return;
      cart.promo = code.toUpperCase();
      $("#promoInput").value = "";
      saveCart();
      showToast("Código aplicado.");
    });

    function getShip(){
      const v = (document.querySelector('input[name="ship"]:checked')||{}).value || "pickup";
      return v;
    }

    payBtn.addEventListener("click", async ()=>{
      if(payBtn.disabled) return;

      payBtn.textContent = "CREANDO CHECKOUT…";
      payBtn.disabled = true;

      try{
        const payload = {
          items: cart.items.map(i => ({ id:i.id, qty:i.qty })),
          promo: cart.promo || null,
          shipping: getShip()
        };

        const res = await fetch(API.createCheckout, {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body: JSON.stringify(payload)
        });

        const data = await res.json().catch(()=> ({}));
        const url = data.url || data.checkoutUrl || data.sessionUrl;

        if(url){
          window.location.href = url;
          return;
        }
        throw new Error("Respuesta sin URL de checkout");
      }catch(err){
        showToast("No se pudo iniciar pago. Revisa Netlify Function create_checkout.");
      }finally{
        payBtn.textContent = "PAGAR (STRIPE)";
        updateCartUI();
      }
    });

    // Mercado Pago (se habilita si tienes URL en data/promos.json)
    mpBtn.addEventListener("click", ()=>{
      if(!MERCADO_PAGO_URL || mpBtn.classList.contains("disabled")) return;
      window.open(MERCADO_PAGO_URL, "_blank");
    });

    // Init
    (async function init(){
      loadSavedCart();
      await loadPromosConfig();

      if(MERCADO_PAGO_URL){
        mpBtn.classList.remove("disabled");
        mpBtn.disabled = false;
        mpBtn.textContent = "PAGAR (MERCADO PAGO)";
      }else{
        mpBtn.classList.add("disabled");
        mpBtn.disabled = true;
        mpBtn.textContent = "PAGAR (MERCADO PAGO) — FALTA URL";
      }

      await loadCatalog();
      setActiveFilter("baja1000");
      updateCartUI();
    })();
  </script>
</body>
</html>